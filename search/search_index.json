{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Inicio de Unidad 1","text":""},{"location":"#bienvenido-a-la-unidad-1","title":"Bienvenido a la Unidad 1","text":""},{"location":"#aqui-esta-el-contenido-de-la-unidad-1","title":"Aqu\u00ed est\u00e1 el contenido de la Unidad 1","text":"<ul> <li>Ver detalles de la Unidad 1</li> </ul>"},{"location":"#a-continuacion-se-muestran-las-imagenes","title":"A continuaci\u00f3n se muestran las im\u00e1genes","text":""},{"location":"Documento%20detallado/","title":"Documento detallado","text":""},{"location":"Documento%20detallado/#parte-1-configuramos-en-aws-con-ubuntu-y-mysql-con-apt-install","title":"PARTE 1: Configuramos en AWS con ubuntu y mysql (con apt install)","text":""},{"location":"Documento%20detallado/#configuramos-el-acceso-desde-el-host-por-ssh-primero-al-equipo-ubuntu-y-a-mysql-desde-este","title":"Configuramos el acceso desde el host por ssh primero al equipo ubuntu y a mysql desde \u00e9ste:","text":""},{"location":"Documento%20detallado/#configuramos-contrasena-para-el-usuario-root","title":"Configuramos contrase\u00f1a para el usuario root:","text":"<p><code>sudo su</code></p> <p><code>select user, host, plugin from user;</code></p> <p><code>alter user 'root'@'localhost' identified with caching_sha2_password by 'contrase\u00f1a';</code></p> <p><code>flush privileges;</code></p> <p></p>"},{"location":"Documento%20detallado/#accedemos-al-archivo-de-configuracion-para-permitir-conexiones-remotas-modificando-la-opcion","title":"Accedemos al archivo de configuraci\u00f3n para permitir conexiones remotas modificando la opci\u00f3n:","text":"<p>bind-address: 0.0.0.0</p> <p><code>sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf</code></p> <p></p>"},{"location":"Documento%20detallado/#reiniciamos-mysql","title":"Reiniciamos mysql:","text":"<p><code>sudo systemctl restart mysql.service</code></p> <p>Comprobamos los puertos que tenemos abiertos en el firewall ufw y habilitamos el puerto 3306:</p> <p><code>sudo ufw status</code></p> <p><code>sudo ufw allow 3306</code></p> <p></p> <p>Creamos un usuario para podernos conectar desde cualquier IP y le damos permisos:</p> <p><code>create user 'usuario'@'%' identified by 'contrase\u00f1a';</code></p> <p><code>grant all privileges on *.* to 'usuario'@'%';</code></p> <p><code>flush privileges;</code></p> <p><code>select user, host, from mysql.user;</code></p> <p></p>"},{"location":"Documento%20detallado/#ajustamos-reglas-del-grupo-de-seguridad-en-aws-mysql-en-puerto-3306","title":"Ajustamos reglas del Grupo de Seguridad en AWS (MySQL en puerto 3306):","text":"<p>Que lo tenemos indicado en el resumen inicial de la instancia. Asignar los permisos en el host para el fichero de la clave .pem:</p> <p><code>sudo chmod 400 /ruta del fichero.pem</code></p> <p>Conectamos por ssh a la MV AWS:</p> <p><code>ssh -i /ruta/a/tu-clave.pem ubuntu@&lt;DNS de IPv4 p\u00fablica&gt; (resumen de la instancia)</code></p> <p></p> <p>Utilizamos el usuario que hemos creado para podernos conectar desde cualquier IP:</p> <p></p>"},{"location":"Documento%20detallado/#parte-2-vamos-a-crear-una-instancia-en-aws-ec2","title":"PARTE 2: Vamos a crear una instancia en AWS EC2","text":""},{"location":"Documento%20detallado/#donde-podamos-ejecutar-mysql-server-en-un-contenedor-docker-y-acceder-desde-nuestro-host-local-a-traves-del-puerto-3307","title":"Donde podamos ejecutar MySQL Server en un contenedor Docker y acceder desde nuestro host local a trav\u00e9s del puerto 3307:","text":"<p>Accedemos al grupo de seguridad y editamos las reglas para agregar una y poder abrir el puerto 3306 (mysql) y 3307/tcp para permitir el acceso a \u00e9ste desde nuestro host:</p> <p></p> <p>Conectamos y verificamos que la tenemos actualizada:</p> <p><code>sudo apt update &amp;&amp; sudo apt dist-upgrade -y</code></p> <p>Instalamos Docker</p> <p><code>sudo apt install docker.io</code></p> <p>Nos aseguramoa que docker est\u00e1 en ejecuci\u00f3n</p> <p></p> <p>Reiniciamos</p> <p><code>sudo reboot</code></p> <p>Descargamos la imagen de mysql</p> <p><code>docker versi\u00f3n</code></p> <p><code>sudo docker pull mysql:latest</code></p> <p></p> <p>Una vez tengamos descargada la imagen, iniciaremos el contenedor de MySQL y mapearemos el puerto 3307 de la instancia EC2 al puerto 3306 del contenedor:</p> <p><code>sudo docker run -d --name nombre-del-contenedor -e MYSQL_ROOT_PASSWORD=contrase\u00f1a -p 3307:3306 mysql</code></p> <p></p> <p>Con esto hacemos lo siguiente</p> <pre><code>\u2022 -d: Ejecutamos el contenedor en modo separado .\n\u2022 --name mysql-contenedor : Asigna un nombre al contenedor.\n\u2022 -e MYSQL_ROOT_PASSWORD=mi_contrase\u00f1a: Establecemos la contrase\u00f1a del usuario root de MySQL.\n\u2022 -p 3307:3306: Mapeamos el puerto 3307 de la instancia EC2 al puerto 3306 del contenedor MySQL.\n</code></pre> <p>Verificamos</p> <p><code>sudo docker ps</code></p> <p></p> <p>Nos conectamos desde nuestro host a la instancia de AWS-docker-mysql por medio de la IP publica de \u00e9sta y por el puerto 3307:</p> <p><code>mysql -u root -p -h ip-p\u00fablica -P 3307</code></p> <p><code>select user, host, from mysql.user;</code></p> <p></p>"}]}